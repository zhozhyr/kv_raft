# Distributed Key–Value Storage based on Raft

## Описание проекта

В рамках данного проекта реализовано распределённое отказоустойчивое
Key–Value хранилище, использующее алгоритм консенсуса **Raft**
для согласования состояния между узлами кластера.

Система предназначена для практического изучения принципов построения
распределённых систем, требующих консенсуса, и демонстрации поведения
кластера при отказах узлов и сетевых разделениях.

## Архитектура системы

Система состоит из нескольких узлов, объединённых в кластер.

Каждый узел включает в себя:
- реализацию алгоритма Raft (выбор лидера, репликация лога);
- HTTP API для взаимодействия с другими узлами и клиентами;
- локальное персистентное хранилище состояния;
- state machine в виде Key–Value хранилища.

Все узлы равноправны и могут становиться лидером в результате выборов.

## Алгоритм консенсуса

В проекте реализованы основные механизмы Raft:
- роли **Follower**, **Candidate**, **Leader**;
- выбор лидера с использованием RPC `RequestVote`;
- поддержание лидерства и репликация лога через `AppendEntries`;
- коммит лог-записей по достижении кворума;
- восстановление состояния узла при перезапуске.

Key–Value хранилище рассматривается как **детерминированная state machine**,
к которой применяются закоммиченные записи лога.

## Персистентность и отказоустойчивость

Каждый узел сохраняет своё состояние на диск, включая:
- текущий термин;
- информацию о голосовании;
- лог записей;
- индекс последней закоммиченной записи.

При перезапуске узел загружает сохранённое состояние и восстанавливает
состояние state machine, применяя закоммиченные лог-записи.

Использование Docker volume позволяет сохранять данные узлов
между перезапусками контейнеров.

## API

Система предоставляет HTTP API для:
- клиентских операций `PUT` и `GET`;
- внутренних Raft RPC (`RequestVote`, `AppendEntries`);
- получения текущего состояния узла.

Клиентские запросы автоматически перенаправляются на текущего лидера.

## Запуск проекта

### Требования
- Docker
- Docker Compose
- Python 3.12+

### Запуск кластера

```bash
docker-compose up --build
